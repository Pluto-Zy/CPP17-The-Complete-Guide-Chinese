### 关于本书

C++17 是现代 C++ 编程的下一个演变，它至少已经被最新版本的 gcc、clang 和 Visual C++ 部分支持。尽管到 C++17 的演变没有到 C++11 的那么大，但 C++17 包含了大量小而有价值的语言特性和库特性，这将再次改变我们使用 C++ 编程的方式。这对应用程序程序员和提供基础库的程序员都适用。

本书将展示 C++17 中的所有新语言特性和库特性。本书将通过示例和背景信息覆盖每个新特性的出现动机和背景。和我的其它书一样，本书将重点置于新特性在实践中的应用，并将展示新特性如何影响日常编程，以及在项目中你将如何从中受益。

#### 阅读本书需要具备的知识

要从本书获取最大收益，你应该熟悉 C++，最好是 C++11 和 / 或 C++14。然而，你不需要是专家。我的目标是让普通 C++ 程序员能理解内容，而不必知道最新特性的全部细节。你应该熟悉类和继承的概念，并且能使用 IO 流和容器等 C++ 标准库组件编写 C++ 程序。你也应该熟悉 “现代 C++” 的基本特性，例如 `auto`、`decltype`、移动语义和 lambda。

尽管如此，我仍然会在需要时讨论基本特性，并深入更细微的问题，即使这些问题和 C++17 没有直接关系。这确保了专家和中级程序员都能理解本书。

注意，我通常使用带花括号的现代形式的初始化（在 C++11 中作为*统一初始化*引入）：

```c++
int i{42};
std::string s{"hello"};
```

这种形式的初始化叫做*列表初始化*（list initialization），其优点是：能用于基础类型、类类型、聚合（在 C++17 中扩展）、枚举类型（在 C++17 中新增），以及 `auto`（在 C++17 中修改），并能检测窄化转换错误（例如，用浮点值初始化 `int`）。如果花括号为空，就会调用（子）对象的默认构造函数，并用 `0`/`false`/`nullptr` 初始化基础数据类型[^1]。

[^1]:唯一的例外是原子数据类型（`std::atomic<>` 类型），即使是列表初始化也不能保证合适的初始化行为。这有望在 C++20 中修复。

#### 本书的整体结构

本书包含了 C++17 引入的对 C++ 的*全部*更改。这适用于语言和库特性，以及影响日常应用程序编程的特性，和用于（基础）库的复杂实现的特性。不过，更一般的例子通常都是最先出现的。

不同的章节是分组的，但是分组没有更深刻的教学原因，除了首先介绍语言特性是有意义的，因为它们可能会被后面的库特性所使用。原则上，你可以按任意顺序阅读章节。如果某处组合了不同章节的特性，书中就会有对应的交叉引用。

因此，本书包含如下部分：

+ **第一部分**覆盖了新的非模板语言特性。
+ **第二部分**覆盖了使用模板进行泛型编程的新语言特性。
+ **第三部分**介绍了新的标准库组件。
+ **第四部分**覆盖了对标准库现有组件的扩展和修改。
+ **第五部分**覆盖了适用于基础库程序员这样的专家的语言和库特性。
+ **第六部分**包含了一些关于 C++17 的总结性一般提示。

#### 如何阅读本书

以我的经验，学习新东西的最好方式就是阅读示例。因此，你会在本书中找到许多示例。有些示例就是几行代码，用于解释某个抽象概念，而其它示例则是提供了所述材料的具体应用的完整程序。后一种示例会通过 C++ 注释来介绍，注释中描述了包含程序代码的文件。你可以在本书的网站 `http://www.cppstd17.com` 上找到这些文件。

#### 描述错误的术语

注意我经常讨论程序错误。如果没有特殊提示，术语*错误*（error）或下面这样的注释

```c++
...		// 错误
```

表示编译时错误。对应的代码不应（被符合标准的编译器）编译。

如果我使用术语*运行时错误*（runtime error），那么程序可能能编译，但行为错误，或者会导致未定义行为（因此，它可能会或可能不会产生预期的行为）。

#### C++17 标准

最初的 C++ 标准于 1998 年发布，随后于 2003 年通过*技术勘误表*进行了修订，从而对最初的标准进行了细微的修正和澄清。这个 “旧 C++ 标准” 称为 C++98 或 C++03。

“现代 C++” 的世界始于 C++11，并在 C++14 中扩展。国际 C++ 委员会现在的目标是每三年发布一个新标准。显然，这给大量的添加留下了更少的时间，但它能为日益广泛的编程社区提供更快速的变化。因此，更大特性的开发需要时间，并可能跨越多个标准。

C++17 仅仅是下一步。这不是一场革命，但它确实带来了大量的改进和扩展。

在编写本书的时刻，C++17 至少已经被主流编译器部分支持了。然而，像以往一样，编译器在支持新的不同语言特性时有很大差异。一些人能编译本书中的大部分甚至全部代码，而其他人可能只能处理一个重要的子集。然而，我预期这个问题很快就会解决，因为各地的程序员都要求他们的供应商提供标准支持。

#### 示例代码和其它信息

你可以在本书的网站上找到所有示例程序和更多信息，URL 如下：

```
http://www.cppstd17.com
```

#### 反馈

我欢迎你的建设性意见 —— 包括消极的和积极的。我一直全力以赴，希望为大家带来一本优秀的书。但是，为了 “发布新的修订版”，有时我不得不暂停写作、审校和调整的工作。因此，你难免会在书中发现错误和不一致的地方，描述欠妥的文本，以及缺失的主题。你的反馈给了我修复这些问题的机会，并能通过本书的网站将变化通知所有的读者，并改进任何后续的修订版本。

联系我的最好方式是电子邮件。你可以在本书的网站上找到我的电子邮件地址：

```
http://www.cppstd17.com
```

请确保有本书的最新版本（记住本书是增量编写和发布的），并在提供反馈时提及该版本的发布日期 。当前的发布日期是 **2019-12-20**（你也可以在第 ii 页，即封面的后一页找到）。

非常感谢。

